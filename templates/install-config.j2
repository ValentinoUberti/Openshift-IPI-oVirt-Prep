apiVersion: v1
baseDomain: {{ networking.domain_name }}
compute:
- architecture: amd64
  hyperthreading: Enabled
  name: worker
  platform: {}
  replicas: 2
  platform:
    ovirt:
      affinityGroupsNames:
      - compute
controlPlane:
  architecture: amd64
  hyperthreading: Enabled
  name: master
  platform: {}
  replicas: 3
  platform:
    ovirt:
      affinityGroupsNames:
      - controlplane
metadata:
  name: {{ ocp.cluster_name }}
networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  machineNetwork:
  - cidr: 10.0.0.0/16
  networkType: KubernetesOVN
  serviceNetwork:
  - 172.30.0.0/16
platform:
  ovirt:
    api_vip: {{ ocp.reserved_ip.api }}
    ingress_vip: {{ ocp.reserved_ip.apps }}
    ovirt_cluster_id: {{  hostvars['DUMMY'].ovirt_cluster_id }}
    ovirt_network_name: {{ ovirt.network.internal.network }}
    ovirt_storage_domain_id: {{  hostvars['DUMMY'].ovirt_storage_domain_id }}
    vnicProfileID: {{  hostvars['DUMMY'].vnicProfileID }}
    affinityGroups:
    - description: AffinityGroup for spreading each compute machine to a different
        host
      enforcing: false
      name: compute
      priority: 3
    - description: AffinityGroup for spreading each control plane machine to a different
        host
      enforcing: false
      name: controlplane
      priority: 5

publish: External
pullSecret: '{{ ocp.pull_secret }}'
sshKey: '{{ ssh_key }}'
